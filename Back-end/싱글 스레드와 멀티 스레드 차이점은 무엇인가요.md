<img src="https://cdn.discordapp.com/attachments/840550010826915841/912268268239196180/001.png" width="500" >

### 프로세스란?
운영체제에서는 실행중인 하나의 애플리케이션을 프로세스라고 부른다.
<br> 사용자가 애플리케이션을 실행하면, 운영체제로부터 실행에 필요한 메모리를 할당받아 애플리케이션의 코드를 실행한다.
<br> 이 때 실행되는 애플리케이션을 프로세스라고 부른다. 사용자가 작성한 프로그램이 운영체제에 의해 메모리 공간을 할당받아 실행중인 것을 말하며 이는 프로그램에 사용되는 데이터와 메모리 등의 자원 그리고 스레드로 구성된다.
<br> ex) chrome 브라우저를 2개 실행하면 2개의 프로세스가 생성.

### 스레드란?
스레드의 사전적 의미는 '한 가닥의 실'이란 의미로, 하나의 스레드는 코드가 실행되는 하나의 흐름을 의미.
<br> 프로세스 내에서 실제로 작업을 수행하는 주체이다. 모든 프로세스에는 하나 이상의 스레드가 존재하여 작업을 수행함. 일반적으로 스레드는 자신만의 고유한 스레드 ID, 프로그램 카운터, 레지스터 집합, 스택을 가지고, 코드,데이터, heap 영역 등 기타 자원은 프로세스 내의 다른 스레드와 공유함.
<br> 각 스레드마다 call stack(실행중인 서브루틴을 저장하는 자료구조)이 존재. 스레드는 다른 스레드와 독립적으로 동작한다.
  * 코드(Code) : 코드 자체를 구성하는 메모리 영역(프로그램 명령)
  * 데이터(Data) : 전역 변수, 정적변수, 배열 등 초기화된 데이터는 data 영역에 저장/ 초기화되지 않은 데이터는 bss 영역에 저장
  * 힙(Heap) : 동적 할당 시 사용
  * 스택(Stack) : 지역 변수, 매개 변수, 리턴 값(임시 메모리 영역)
프로세스와 같이 실행, 준비, 대기 등의 실행 상태를 가지며, 실행 상태가 변할 때마다 스레드 문맥교환(context switching)을 수행한다.
스레드가 레지스터와 스택을 독립적으로 할당받는 이유는 스택은 함수 호출 시 전달되는 인자, 되돌아갈 주소 값 및 함수 내에서 선언하는 변수 등을 저장하기 위해 사용되는 메모리 공간이므로 스택 메모리 공간이 독립적이라는 것은 독립적인 함수호출이 가능하다는 것이고, 이는 독립적인 실행 흐름이 가능하게 한다. 따라서 독립적인 실행흐름을 최소 조건으로 독립된 스택을 할당하는 것이다.
<br> 스레드는 CPU를 할당받았다가 스케줄러에 의해 다시 선점당한다. 그렇기 때문에 명령어가 연속적으로 수행되지 못하고 어느 부분까지 수행했는지 기억할 필요가 있기 때문에 레지스터를 독립적으로 할당하는 것이다.

### 싱글스레드란?
프로세스가 단일 스레드로 동작하는 방식. 하나의 레지스터와 스텍을 가지고 있음. 가장 대표적으로 Javascript가 싱글 스레드 언어이다.
#### 장점
* 자원 접근에 대한 동기화
    싱글 스레드는 다른 스레드와 자원을 공유하지 않으므로 동기화를 신경쓸 필요가 없다.
* 문백 교환작업을 하지 않음
    단일 스레드로 동작하기 때문에 문맥교환(Context Switching)할 필요가 없다.
    ##### 문맥교환이란?
    다른 태스크(프로세스,스레드)가 시작할 수 있도록 이미 실행중인 태스크를 멈추는 것을 의미.
 
#### 단점
* CPU 코어를 모두 활용하지 못함
  싱글 스레드는 물리적으로 하나의 코어밖에 사용하지 못해 멀티 코어 머신에서 CPU 사용을 최적화할 수 없다.
  <br> 최적화를 위해선 클러스터 모듈을 이용해 어러 프로세스를 사용할 수 있지만 프로세스끼리의 자원 공유가 어렵기 때문에 Redis와 같은 부가 인프라가 필요하다.
### 멀티스레드란?
멀티스레드란 두 개 이상의 스레드가 프로세스 내부에서 자원을 공유하며 작업을 수행하는 경우.
<br> 하나의 컴퓨터에 여러 CPU를 장하여 하나 이상의 프로세스들을 동시에 처리(병렬로 실행).
<br> 멀티 스레드는 다양한 곳에서 사용되는데 대용량 데이터의 처리 시간을 줄이기 위해 데이터를 분할해 병렬로 처리하는데에 사용할 수도 있고, UI를 가지고 있는 애플리케이션에서 네트워크 통신을 하기 위해 사용할 수도 있다. 또한 여러 클라이언트의 요청을 처리하는 서버를 개발할 때에도 사용됨.
#### 장점
* 메모리 공간과 시스템 자원의 소모가 줄어듬
프로세스를 이용해 동시에 처리하던 일을 스레드로 구현할 경우, 메모리 공간과 시스템 자원의 소모가 줄어든다. 
<br> 스레드 간의 통신이 필요한 경우에도 별도의 자원을 이용하는 것이 아니라 전역 변수의 공간 또는 동적으로 할당된 공간인 Heap 영역을 이용한다. 
<br> 따라서 프로세스 간 통신 방법(IPC)에 비해 스레드 간의 통신 방법이 훨씬 간단함. 시스템의 처리량이 향상되고 자원 소모가 줄어들어 자연스럽게 프로그램의 응답 시간이 단축된다.
<br> 이런 장점으로 여러 프로세스로 할 수 있는 작업을 하나의 프로세스에서 스레드로 나눠 수행한다.
#### 단점
* 공유 자원에 대한 고민
멀티 프로세스 기반으로 프로그래밍할 때에는 프로세스 간 공유하는 자원이 없다. 따라서 동일한 자원에 동시에 접근하는 일이 없었지만, 멀티 스레딩을 기반으로 프로그래밍할 때에는 공유하는 자원에 대해 고민이 필요하다. 서로 다른 스레드가 같은 데이터에 접근하고, 힙 영역을 공유하기 때문에 서로 다른 스레드가 서로 사용중인 변수나 자료구조에 접근해 엉뚱한 값을 읽어오거나 수정하는 일이 발생할 수 있기 때문에.
* 위의 이유로 동기화 작업 필요
멀티 스레딩 환경에서는 동기화를 통해 작업 처리 순서를 제어하고, 공유 자원에 대한 접근을 제어해야 함.
### 동시성과 병렬성의 차이
<img src="https://cdn.discordapp.com/attachments/840550010826915841/912268268553773127/002.png" width="500" >

동시에 돌릴 수 있는 스레드 수는 컴퓨터에 있는 코어의 갯수로 제한됨. 운영체제는 각 스레드를 시간에 따라 분할하여, 여러 스레드가 일정시간마다 돌아가면서 실행되도록 한다.
* 동시성 : 여러 개의 스레드가 시분할 방식으로 동시에 수행되는 것처럼 착각을 불러일으킴
* 병렬성 : 멀티 코어 환경에서 여러 개의 스레드가 실제로 동시에 수행됨.
